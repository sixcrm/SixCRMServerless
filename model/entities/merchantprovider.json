{
	"$schema": "http://json-schema.org/schema#",
	"id":"/MerchantProvider",
	"title": "Merchant Provider",
	"type": "object",
	"definitions": {
		"ISO8601": {
			"type": "string",
			"pattern":"^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}(.[0-9]+)?(([+-][0-9]{2}:[0-9]{2})|Z)?$"
		},
		"UUIDv4": {
			"type": "string",
			"pattern":"^[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-4[0-9A-Fa-f]{3}-[89ABab][0-9A-Fa-f]{3}-[0-9A-Fa-f]{12}$"
		},
		"SixAccountIdentifier":{
			"anyOf":[
				{"$ref": "#/definitions/UUIDv4"},
				{"type":"string", "enum":["*"]}
			]
		},
		"Percentage": {
			"type":"number",
			"minimum":0,
			"maximum":1,
			"exculsiveMinimum":false,
			"exculsiveMaximum":false
		},
		"CURRENCY":{
			"anyOf":[
				{
					"type":"string",
					"pattern":"^\\$[0-9]+\\.[0-9]{2}$"
				},
				{
					"type":"number",
					"minimum": 0
				}
			]
		}
	},
	"properties": {
		"id":{"$ref": "#/definitions/UUIDv4"},
		"account":{"$ref": "#/definitions/SixAccountIdentifier"},
		"name":{
			"type":"string",
			"minLength":2
		},
		"processor":{
			"type":"object",
			"fields":{
				"name":{
					"type":"string",
					"enum":["NMA","Humbolt","GMA","Group ISO"]
				},
				"id":{
					"type":"string"
				}
			},
			"required":["name"]
		},
		"processing":{
			"type":"object",
			"fields":{
				"monthly_cap": {"$ref": "#/definitions/CURRENCY"},
				"discount_rate":{"$ref": "#/definitions/Percentage"},
				"transaction_fee":{"$ref": "#/definitions/CURRENCY"},
				"reserve_rate": {"$ref": "#/definitions/Percentage"},
				"maximum_chargeback_ratio":{"$ref": "#/definitions/Percentage"},
				"transaction_counts":{
					"type":"object",
					"fields":{
						"daily":{
							"type":"integer",
							"minimum":0,
							"exclusiveMinimum":false
						},
						"weekly":{
							"type":"integer",
							"minimum":0,
							"exclusiveMinimum":false
						},
						"monthly":{
							"type":"integer",
							"minimum":0,
							"exclusiveMinimum":false
						}
					}
				}
			},
			"required":["monthly_cap","discount_rate", "transaction_fee", "reserve_rate", "maximum_chargeback_ratio", "transaction_counts"]
		},
		"gateway": {
			"type":"object",
			"fields":{
				"name":{
					"type":"string",
					"enum":["NMI"]
				},
				"username":{
					"type":"string"
				},
				"password":{
					"type":"string"
				},
				"endpoint":{
					"type":"string",
					"format":"uri"
				},
				"additional":{
					"type":"object"
				}
			},
			"required":["name","username","password","endpoint"]
		},
		"enabled":{
			"type":"boolean"
		},
		"allow_prepaid":{
			"type":"boolean"
		},
		"accepted_payment_methods":{
			"type":"array",
			"items":{
				"type":"string",
				"enum":["Visa", "Mastercard", "American Express", "LOCAL CARD"]
			},
			"minItems":1,
			"uniqueItems":true
		},
		"customer_service":{
			"type":"object",
			"fields":{
				"email":{
					"type":"string",
					"format":"email"
				},
				"url":{
					"type":"string",
					"format":"uri"
				},
				"description":{
					"type":"string"
				}
			}
		},
		"created_at":{"$ref": "#/definitions/ISO8601"},
		"updated_at":{"$ref": "#/definitions/ISO8601"}
	},
	"required":["id", "account", "name", "processor", "processing", "gateway", "enabled", "allow_prepaid", "accepted_payment_methods", "created_at", "updated_at"]
}
